<!DOCTYPE html>
<html>

<head>
  <title>mpce</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="meta">
  <link rel="stylesheet" href="/dist/style.css">
</head>

<body>
  <nav>
    <div>
      <a href="#">
        <div class="logo">mp,ce</div>
      </a>
      <a href="#">
        <img class="menu" src="/dist/menuIcon.png">
      </a>
    </div>
  </nav>

  <main>
    <h3 style="display: inline-block;" id="testName"></h3>

    <a style="display: inline-block;" class="btn" href="/addtest">Add an item</a>

    <div id="itemsDisplay"></div>

    <script src="https://code.jquery.com/jquery-2.2.1.min.js"
      integrity="sha256-gvQgAFzTH6trSrAWoH1iPo9Xc96QxSZ3feW6kem+O00=" crossorigin="anonymous"></script>
    <script>
      $(document).ready(function () {
        let arr = window.location.href.split('/')
        let testNameLc = arr[arr.length - 1]

        $.ajax({
          type: 'GET',
          url: '/api/items/' + testNameLc,
          success: function (data) {
            $('#testName').text(data.testName)
            console.log(data)

            let result = ''
            for (let i = 0; i < data['items'].length; i++) {
              result += `<p>${data['items'][i].question}</p>`

              result += '<ul>'
              for (let option of data['items'][i].options) {
                result += `<li>${option}</li>`
              }
              result += '</ul><hr>'
            }
            result += '<p>end</p>'

            $('#itemsDisplay').html(result)
          }
        })
      })
    </script>
  </main>
</body>

</html>